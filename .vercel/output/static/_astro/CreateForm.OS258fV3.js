import{j as e,s as g}from"./supabase.9Iv7BTZc.js";import{r}from"./index.LFf77hJu.js";const h=()=>{const[t,o]=r.useState(null),[c,d]=r.useState(""),[n,i]=r.useState(!1),[u,m]=r.useState(!1),[b,a]=r.useState(!1),p=s=>{const l=s.target.files[0];o(l),d(l.name)},x=s=>{s.preventDefault();const l=s.dataTransfer.files[0];o(l),d(l.name)},f=async()=>{try{if(!t){console.error("No file selected");return}i(!0);const{data:s,error:l}=await g.storage.from("news_images").upload(`/${t.name}`,t);if(i(!1),l){console.error("Error uploading file:",l.message),a(!0);return}console.log("File uploaded:",s.Key),m(!0),o(null),d("")}catch(s){i(!1),console.error("Error uploading file:",s),a(!0)}};return e.jsx("div",{className:"",children:e.jsxs("div",{className:"max-w-md mx-auto p-4 bg-white rounded shadow-lg",children:[e.jsx("div",{className:"w-full h-64 flex flex-col items-center justify-center border-2 border-dashed border-gray-400 rounded-lg mb-4",onDragOver:s=>s.preventDefault(),onDrop:x,children:e.jsxs("label",{htmlFor:"file-upload",className:"flex flex-col items-center space-y-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{fillRule:"evenodd",d:"M3 5a2 2 0 012-2h10a2 2 0 012 2v2.586a1 1 0 01-.293.707l-4.5 4.5a1 1 0 01-1.414 0l-4.5-4.5A1 1 0 013 7.586V5zm14 2.586V5a3 3 0 00-3-3H5a3 3 0 00-3 3v2.586A1 1 0 002 8.293l5 5a1 1 0 001.414 0l5-5a1 1 0 00-.707-1.707z",clipRule:"evenodd"}),e.jsx("path",{fillRule:"evenodd",d:"M2.293 9.707a1 1 0 010-1.414l5-5a1 1 0 011.414 1.414l-5 5a1 1 0 01-1.414 0zM13 18a2 2 0 01-2 2H5a2 2 0 01-2-2v-4a1 1 0 011-1h12a1 1 0 011 1v4zm1-10.414V15a3 3 0 01-3 3H4a3 3 0 01-3-3v-7a1 1 0 011-1h4.586a1 1 0 01.707.293l3 3a1 1 0 01.293.707z",clipRule:"evenodd"})]}),e.jsx("p",{className:"text-gray-500",children:"Drag & drop your image here"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Or select from your computer"}),e.jsx("input",{type:"file",className:"hidden",onChange:p,accept:"image/*",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"py-2 px-4 bg-blue-400 border border-black text-black rounded-md cursor-pointer",children:"Select Image"})]})}),c&&e.jsxs("p",{className:"mt-2 text-gray-700 truncate",children:["Selected file: ",c]}),e.jsx("button",{className:`mt-2 w-full py-2 px-4 ${n?"bg-gray-300 cursor-not-allowed":"bg-green-500 hover:bg-green-600"} text-black border border-black rounded-md active:transition-transform active:translate-y-1`,onClick:f,disabled:n,children:n?"Uploading...":"Upload Image to Bucket"}),u&&e.jsx("div",{className:"mt-2 p-2 bg-green-200 text-green-800 rounded flex items-center justify-center",children:"Image uploaded successfully!"}),b&&e.jsx("div",{className:"mt-2 p-2 bg-red-200 text-red-800 rounded",children:"Error uploading image. Please try again."})]})})},v=()=>{const[t,o]=r.useState(""),[c,d]=r.useState(""),[n,i]=r.useState(""),[u,m]=r.useState(""),b=async a=>{a.preventDefault();try{const{data:p,error:x}=await g.from("news_articles").insert([{title:t,description:c,body:u,date_published:n}]);if(x)throw x;o(""),d(""),m(""),i(""),alert("News added successfully!")}catch(p){console.error("Error adding news:",p),console.log("Failed to add news. Please try again.")}};return e.jsx("div",{className:"container mx-auto p-4 m-10 bg-gray-100 border border-black rounded",children:e.jsxs("div",{className:"flex flex-wrap",children:[e.jsxs("div",{className:"w-full md:w-1/2 p-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create News Article"}),e.jsxs("form",{onSubmit:b,className:"max-w-lg",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"newsTitle",className:"block text-gray-700 font-bold",children:"News Title:"}),e.jsx("input",{type:"text",id:"newsTitle",name:"newsTitle",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",value:t,onChange:a=>o(a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"newsDescription",className:"block text-gray-700 font-bold",children:"News Description:"}),e.jsx("input",{type:"text",id:"newsDescription",name:"newsDescription",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",value:c,onChange:a=>d(a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"newsBody",className:"block text-gray-700 font-bold",children:"News Body:"}),e.jsx("textarea",{id:"newsBody",name:"newsBody",rows:"4",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",value:u,onChange:a=>m(a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"datePublished",className:"block text-gray-700 font-bold",children:"Date Published:"}),e.jsx("input",{type:"date",id:"datePublished",name:"datePublished",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",value:n,onChange:a=>i(a.target.value)})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-green-500 py-2 px-4 border border-black rounded-md hover:bg-green-600 active:transition-transform active:translate-y-1",children:"Upload"})})]})]}),e.jsxs("div",{className:"w-full md:w-1/2 p-10",children:[e.jsx("h1",{className:"font-bold flex justify-center p-5",children:"Upload News Article Image:"}),e.jsx(h,{})]})]})})};export{v as default};
