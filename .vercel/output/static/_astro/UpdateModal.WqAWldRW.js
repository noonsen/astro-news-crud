import{s as g,j as e}from"./supabase.9Iv7BTZc.js";import{r as s}from"./index.LFf77hJu.js";const C=({id:a})=>{const[r,d]=s.useState(!1),[z,o]=s.useState(!1),[M,n]=s.useState(),[i,c]=s.useState(""),[h,u]=s.useState(""),[m,b]=s.useState(""),[p,x]=s.useState(""),[w,v]=s.useState(null);s.useEffect(()=>{r&&y()},[r]);const y=async()=>{try{const{data:t,error:l}=await g.from("news_articles").select("id, title, description, body, date_published").eq("id",a).single();if(l)throw l;t&&(v(t.id),c(t.title),u(t.description),x(t.date_published),b(t.body))}catch(t){console.error("Error fetching news data:",t)}},j=()=>{d(!0),n(a),o(!0)},f=()=>{d(!1),n(null),o(!1)},N=async t=>{t.preventDefault();try{await q(),f(),alert("News updated successfully!")}catch(l){console.error("Error updating news:",l),alert("Failed to update news. Please try again.")}},q=async()=>{const{error:t}=await g.from("news_articles").update({title:i,description:h,body:m,date_published:p}).eq("id",a);if(t)throw t};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:j,className:" flex px-3 py-2 font-semibold bg-blue-400 rounded-lg hover:transition-transform hover:scale-110 active:translate-y-1 p-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"gap-2",width:"20",height:"20",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"#070606",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h8.925l-2 2H5v14h14v-6.95l2-2V19q0 .825-.587 1.413T19 21zm4-6v-4.25l9.175-9.175q.3-.3.675-.45t.75-.15q.4 0 .763.15t.662.45L22.425 3q.275.3.425.663T23 4.4q0 .375-.137.738t-.438.662L13.25 15zM21.025 4.4l-1.4-1.4zM11 13h1.4l5.8-5.8l-.7-.7l-.725-.7L11 11.575zm6.5-6.5l-.725-.7zl.7.7z"})}),"Update"]}),r&&e.jsx("div",{className:"fixed top-0 left-0 z-50 h-screen w-full flex justify-center items-center backdrop-filter backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white p-5 w-80 active:bg-blur rounded-lg shadow-lg border border-black ",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Update News Article"}),e.jsxs("div",{children:["ID: ",w]})," ",e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"title",className:"font-bold",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:i,onChange:t=>c(t.target.value),className:"border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"description",className:"font-bold",children:"Description"}),e.jsx("textarea",{id:"description",value:h,onChange:t=>u(t.target.value),className:"border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"body",className:"font-bold",children:"Body"}),e.jsx("textarea",{id:"newsBody",name:"newsBody",rows:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",value:m,onChange:t=>b(t.target.value)})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"datePublished",className:"font-bold",children:"Date Published"}),e.jsx("input",{type:"date",id:"datePublished",value:p,onChange:t=>x(t.target.value),className:"border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsxs("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-1 rounded-md hover:bg-blue-600",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"#070606",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h8.925l-2 2H5v14h14v-6.95l2-2V19q0 .825-.587 1.413T19 21zm4-6v-4.25l9.175-9.175q.3-.3.675-.45t.75-.15q.4 0 .763.15t.662.45L22.425 3q.275.3.425.663T23 4.4q0 .375-.137.738t-.438.662L13.25 15zM21.025 4.4l-1.4-1.4zM11 13h1.4l5.8-5.8l-.7-.7l-.725-.7L11 11.575zm6.5-6.5l-.725-.7zl.7.7z"})}),"Update"]}),e.jsx("button",{type:"button",onClick:f,className:"bg-red-400 text-gray-700 px-4 py-2 rounded-md ml-2 hover:bg-red-500",children:"Cancel"})]})]})]})})]})};export{C as default};
