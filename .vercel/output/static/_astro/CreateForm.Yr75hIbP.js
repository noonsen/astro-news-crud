import{j as e,s as f}from"./supabase.9Iv7BTZc.js";import{r}from"./index.LFf77hJu.js";const j=()=>{const[l,o]=r.useState(""),[n,i]=r.useState(""),[d,c]=r.useState(""),[m,u]=r.useState(""),[t,b]=r.useState(null),p=s=>{s.target.files&&s.target.files[0]&&b(s.target.files[0])},w=async s=>{s.preventDefault();try{let a="";if(t){const{data:x,error:h}=await f.storage.from("news_images").upload(`${t.name}`,t,{cacheControl:"3600"});if(h)throw h;x&&(a=`https://news_images/${x.path}`)}const{error:g}=await f.from("news_articles").insert([{title:l,description:n,body:m,date_published:d,images:a}]);if(g)throw g;o(""),i(""),u(""),c(""),b(null),alert("News article created successfully!")}catch(a){console.error("Error creating news article:",a),console.error("Failed to create news article. Please try again.",a)}};return e.jsx("div",{className:"container mx-auto p-4 m-10 bg-gray-100 border border-black rounded",children:e.jsx("div",{className:"flex flex-wrap",children:e.jsxs("div",{className:"w-full md:w-1/2 p-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create News Article"}),e.jsxs("form",{onSubmit:w,className:"max-w-lg",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"newsTitle",className:"block text-gray-700 font-bold",children:"News Title:"}),e.jsx("input",{type:"text",id:"newsTitle",name:"newsTitle",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",value:l,onChange:s=>o(s.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"newsDescription",className:"block text-gray-700 font-bold",children:"News Description:"}),e.jsx("input",{type:"text",id:"newsDescription",name:"newsDescription",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",value:n,onChange:s=>i(s.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"newsBody",className:"block text-gray-700 font-bold",children:"News Body:"}),e.jsx("textarea",{id:"newsBody",name:"newsBody",rows:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",value:m,onChange:s=>u(s.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"datePublished",className:"block text-gray-700 font-bold",children:"Date Published:"}),e.jsx("input",{type:"date",id:"datePublished",name:"datePublished",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",value:d,onChange:s=>c(s.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"newsImage",className:"block text-gray-700 font-bold",children:"News Image:"}),e.jsx("input",{type:"file",id:"newsImage",name:"newsImage",accept:"image/*",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",onChange:p})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-green-500 py-2 px-4 border border-black rounded-md hover:bg-green-600 active:transition-transform active:translate-y-1",children:"Upload"})})]})]})})})};export{j as default};
